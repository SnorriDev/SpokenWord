onStart:
  events:
    - TIMELINE:
        object: start
  actions:
    - SET_OBJECTIVE:
        objective:
          !objective
            shortDesc: explore the Temple of Thoth with WASD
            longDesc: |
              <p class="instruction">Hit <span class="control">escape</span> to close this dialog. Then 
              use the <span class="control">WASD</span> keys to move around. If you want to go back to 
              your objective instructions at any point while playing,
              hit <span class="control">escape</span> to open the pause menu.</p>
    - SHOW_DIALOG:
        dialog:
          !dialog
            image: priest
            text: |
              <p><span class="name">Imhotep:</span> Welcome to the temple archives, Prince Setna!
              Now that you are an apprentice scribe, feel free to take a look around.</p>
            showObjective: true

onZone1:
  actions:
    - SET_OBJECTIVE:
        objective:
          !objective
          shortDesc: 'acquire the vocab, walk to the desk, and press spacebar'
          longDesc: |
            <p class="instruction">First collect the sparkling artifacts and papyrus on
            the ground. Each artifact unlocks a hieroglyph. Next, walk down to the inkwell and press <span class="control">
            spacebar</span>. Select <span class="control">papyrus</span> on the left panel
            and type the spell <span class="hiero">wn sy</span> in the textbox. Click <span class="control">enchant
            </span> and then press <span class="control">escape</span> to close the window.</p>
    - SHOW_DIALOG:
        dialog:
          !dialog
            image: priest
            text: |
              <p><span class="name">Imhotep:</span> Men listen when your father the Pharoah 
              speaks for Horus, but the world itself listens to sorcerers who speak through Thoth.
              The ability to alter reality with hieroglyphs is a powerful gift that few possess, 
              and even fewer have mastered. See if you can write a spell to unlock this door.</p>
            showObjective: true

onEnchant:
  events:
    - ENCHANT:
        object: wn sy
  actions:
    - SET_OBJECTIVE:
        objective:
          !objective
            shortDesc: put your mouse over the door and press 3
            longDesc: |
              <p class="instruction">Wait until your spell is off cooldown, and then put
              your cursor over the door and press <span class="control">3</span>.</p>
    - SHOW_DIALOG:
        dialog:
          !dialog
            image: priest
            text: |
              <p><span class="name">Imhotep:</span> Cast your spell on the door to see if it works.
              Wait a second! Let me stand back so you don't blow me up.</p>
            showObjective: true

onDoorOpen:
  events:
    - DOOR_OPEN:
        object: !door {x: 66, y: 43}
  actions:
    - SET_OBJECTIVE:
        objective:
          !objective
          shortDesc: walk over the sling to pick it up
    - SHOW_DIALOG:
        dialog:
          !dialog
            image: priest
            text: |
              <p><span class="name">Imhotep:</span> By Thoth, you're a natural! Now go grab that sling on the ground.
              You never know what you'll run into this deep in the archives.</p>    

onPickup:
  events:
    - ACQUIRE:
        object: sling
  actions:
    - SET_OBJECTIVE:
        objective:
          !objective
          shortDesc: shoot at the mummies by clicking
          longDesc: |
            <p class="instruction">Shoot by clicking at a target location. If you hearts
            reach zero, you will die!</p>
    - SHOW_DIALOG:
        dialog:
          !dialog
            image: priest
            text: |
              <p><span class="name">Imhotep:</span> Mummies, up ahead!</p>
            showObjective: true
    - SPAWN_ENTITY:
        type: enemy
        pos: !spawn {x: 1904, y: 400}
        tag: enemy1
    - SPAWN_ENTITY:
        type: enemy
        pos: !spawn {x: 2032, y: 400}
        tag: enemy2

onKill:
  events:
    - KILL:
        object: enemy2
  actions:
    - SET_OBJECTIVE:
        objective:
          !objective
          shortDesc: proceed through the maze
    - SHOW_DIALOG:
        dialog:
          !dialog
            image: priest
            text: |
              <p><span class="name">Imhotep:</span> Those mummies fought pretty well considering they have no brains.
              Now let's keep going!</p>

onWall:
  actions:
    - SET_OBJECTIVE:
        objective:
          !objective
            shortDesc: enchant your sling with `qmA Da Say` to blast through the wall
            longDesc: |
              <p class="instruction"> Using the new vocabulary, enchant a spell on your sling
              that will create a sandstorm to blast through the wall.</p>
              
              <p class="instruction">This can be done as follows: <span class="hiero">qmA Da Say</span> <span class="def">(create a storm of sand)</span>.</p>
    - SHOW_DIALOG:
        dialog:
          !dialog
            image: priest
            text: |
              <p><span class="name">Imhotep:</span> Ah, it's blocked off. See if you can blast
              through the wall using your sling.</p> 
            showObjective: true      

onZone2:
  actions:
    - SET_OBJECTIVE:
        objective:
          !objective
            shortDesc: pick up the papyrus and use it to find the name on the urn
            longDesc: |
              <p class="instruction">Pick up the already enchanted papyrus and cast it on the urn by pressing <class="control">4</class>. 
              The spell on this papyrus will reveal the name of objects.</p>
    - SHOW_DIALOG:
        dialog:
          !dialog
            image: priest
            text: |
              <p><span class="name">Imhotep:</span> This crypt must be hundreds of years old.
              I wonder who left that urn here!</p>
            showObjective: true

onWrite:
  events:
    - WRITE:
        object: DHwty
  actions:
    - SET_OBJECTIVE:
        objective:
          !objective
            shortDesc: pray using `dbH DHwty`
            longDesc: |
              <p class="instruction">Cast the spell <span class="hiero">dbH DHwty</span> <span class="def">(pray to DHwty)</span>.</p>
    - SHOW_DIALOG:
        dialog:
          !dialog
            image: priest
            text: |
              <p><span class="name">Imhotep:</span> DHwty - the ancient, venerated name of Thoth! Speaking such a word unleashes
              mystical energy. See what happens if you pray to that name.</p>
            showObjective: true

prayThoth:
  events:
    - PRAY:
        object: DHwty
  actions:
    - SHOW_DIALOG:
        dialog:
          !dialog
            image: ghost
            text: |
              <p><span class="name">Ghost:</span> Behold, sorcerer, you have invoked Thoth the All-Knowing!
              I was Neferkaptah, High Priest of Thoth to Ramesses II, Pharaoh of Upper and Lower Egypt. We have much to discuss.</p>
              
              <p>Your curiosity has led you to my old study, which had been untouched for 1,000 years. It may also 
              lead you on another great quest: recovering the Book of Thoth, an ancient tome which teaches the language of the gods.
              Long ago I set out to find this book. After I had read it, Thoth lashed out at me with unspeakable vengeance,
              and doomed me to be a ghost for eternity.</p>
              
              <p>Don't go looking for that dangerous book, because the gods will never let you suceed!
              Others might tell you that finding my book is your destiny.
              Just remember, wise scribe, only fools believe in destiny.</p>
    - SET_OBJECTIVE:
        objective:
          !objective
            shortDesc: you have beaten the tutorial!